# ðŸš€ Vercel éƒ¨ç½²æŒ‡å—

æœ¬æ–‡æ¡£è¯´æ˜Žå¦‚ä½•å°† KKK POS ç³»ç»Ÿéƒ¨ç½²åˆ° Vercel å¹³å°ã€‚

## ðŸ“‹ éƒ¨ç½²æž¶æž„

### æŽ¨èæ–¹æ¡ˆï¼šæ··åˆéƒ¨ç½²

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Vercel    â”‚  â† å‰ç«¯ï¼ˆ3ä¸ªé¡¹ç›®ï¼‰
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Railway    â”‚  â† åŽç«¯ + WebSocket + åŒºå—é“¾ç›‘å¬
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸ºä»€ä¹ˆï¼Ÿ**
- âœ… Vercel æœ€é€‚åˆé™æ€å‰ç«¯
- âœ… Railway/Render æ”¯æŒæŒç»­è¿è¡Œçš„åŽç«¯
- âœ… ä¿ç•™ WebSocket å’ŒåŒºå—é“¾ç›‘å¬åŠŸèƒ½

## ðŸŽ¯ æ–¹æ¡ˆ Aï¼šå‰ç«¯åˆ° Vercel + åŽç«¯åˆ° Railwayï¼ˆæŽ¨èï¼‰

### æ­¥éª¤ 1ï¼šéƒ¨ç½²å‰ç«¯åˆ° Vercel

#### 1.1 å®‰è£… Vercel CLI

```bash
npm install -g vercel
```

#### 1.2 ç™»å½• Vercel

```bash
vercel login
```

#### 1.3 éƒ¨ç½²å•†å®¶æ‰‹æœºç«¯

```bash
cd frontend/merchant-mobile

# ç”Ÿäº§çŽ¯å¢ƒé…ç½®
cat > .env.production << 'EOF'
VITE_API_URL=https://your-backend.up.railway.app/api
VITE_SOCKET_URL=https://your-backend.up.railway.app
EOF

# éƒ¨ç½²
vercel --prod
```

#### 1.4 éƒ¨ç½²å•†å®¶ç”µè„‘ç«¯

```bash
cd frontend/merchant-desktop

cat > .env.production << 'EOF'
VITE_API_URL=https://your-backend.up.railway.app/api
VITE_SOCKET_URL=https://your-backend.up.railway.app
VITE_PAYMENT_URL=https://kkk-pos-payment.vercel.app
EOF

vercel --prod
```

#### 1.5 éƒ¨ç½²ç”¨æˆ·æ”¯ä»˜ç«¯

```bash
cd frontend/user-payment

cat > .env.production << 'EOF'
VITE_API_URL=https://your-backend.up.railway.app/api
VITE_MONAD_RPC_URL=https://testnet-rpc.monad.xyz
VITE_CONTRACT_ADDRESS=0xDA658fD4Bb122ff322eDb3E8fEA343Ba5f3049E2
VITE_WALLET_CONNECT_PROJECT_ID=1fba176f84da8ad01ca69caa0074f292
EOF

vercel --prod
```

### æ­¥éª¤ 2ï¼šéƒ¨ç½²åŽç«¯åˆ° Railway

#### 2.1 åˆ›å»º Railway è´¦å·

è®¿é—® https://railway.app/ å¹¶æ³¨å†Œ

#### 2.2 åˆ›å»ºæ–°é¡¹ç›®

1. ç‚¹å‡» "New Project"
2. é€‰æ‹© "Deploy from GitHub repo"
3. è¿žæŽ¥æ‚¨çš„ GitHub ä»“åº“

#### 2.3 é…ç½®çŽ¯å¢ƒå˜é‡

åœ¨ Railway é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ ï¼š

```env
PORT=3000
NODE_ENV=production
JWT_SECRET=your_production_secret_key
MONAD_RPC_URL=https://testnet-rpc.monad.xyz
CONTRACT_ADDRESS=0xba53E893Ba76B8971E913d2fB83970aC7CC7a25E
MOBILE_URL=https://kkk-pos-mobile.vercel.app
DESKTOP_URL=https://kkk-pos-desktop.vercel.app
PAYMENT_URL=https://kkk-pos-payment.vercel.app
```

#### 2.4 æ·»åŠ æ•°æ®åº“

Railway æä¾› PostgreSQLï¼Œä½†æˆ‘ä»¬éœ€è¦æ”¹é€ ä»£ç ã€‚

**æˆ–è€…ä½¿ç”¨ MongoDB Atlas:**
1. è®¿é—® https://www.mongodb.com/cloud/atlas
2. åˆ›å»ºå…è´¹é›†ç¾¤
3. èŽ·å–è¿žæŽ¥å­—ç¬¦ä¸²
4. æ·»åŠ åˆ° Railway çŽ¯å¢ƒå˜é‡

### æ­¥éª¤ 3ï¼šæ›´æ–° CORS é…ç½®

ç¡®ä¿åŽç«¯å…è®¸ Vercel åŸŸåè®¿é—®ï¼ˆå·²é…ç½®ä¸ºå…è®¸æ‰€æœ‰æ¥æºï¼‰ã€‚

## ðŸ”„ æ–¹æ¡ˆ Bï¼šå®Œå…¨éƒ¨ç½²åˆ° Vercelï¼ˆéœ€è¦æ”¹é€ ï¼‰

å¦‚æžœæ‚¨åšæŒå…¨éƒ¨ç”¨ Vercelï¼Œéœ€è¦ä»¥ä¸‹æ”¹é€ ï¼š

### æ”¹é€ æ¸…å•

1. **æ•°æ®å­˜å‚¨** â†’ ä½¿ç”¨ Vercel Postgres æˆ– MongoDB Atlas
2. **WebSocket** â†’ æ”¹ç”¨è½®è¯¢æˆ–æ”¾å¼ƒå®žæ—¶åŠŸèƒ½
3. **åŒºå—é“¾ç›‘å¬** â†’ ä½¿ç”¨ Vercel Cron Jobs
4. **åŽç«¯æ”¹é€ ** â†’ æ”¹ä¸º Serverless API

### Vercel Serverless åŽç«¯é…ç½®

<function_calls>
<invoke name="write">
<parameter name="contents">{
  "version": 2,
  "builds": [
    {
      "src": "src/index.js",
      "use": "@vercel/node"
    }
  ],
  "routes": [
    {
      "src": "/api/(.*)",
      "dest": "src/index.js"
    },
    {
      "src": "/health",
      "dest": "src/index.js"
    }
  ],
  "env": {
    "NODE_ENV": "production"
  }
}
